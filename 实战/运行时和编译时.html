<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>运行时和编译时示例</title>
  </head>
  <body>
    <h2>运行时框架示例</h2>
    <div id="runtime-demo"></div>

    <h2>运行时+编译时框架示例 (Vue风格)</h2>
    <div id="mixed-demo">
      <template id="template">
        <div>
          <span>计数器：{{count}}</span>
          <button @click="increment">+1</button>
        </div>
      </template>
    </div>

    <h2>编译时框架示例 (Svelte风格)</h2>
    <div id="compile-demo"></div>

    <script>
      // 纯运行时示例
      function render(obj, root) {
        const el = document.createElement(obj.tag)

        if (typeof obj.children === 'string') {
          const text = document.createTextNode(obj.children)
          el.appendChild(text)
        } else if (obj.children) {
          obj.children.forEach(child => render(child, el))
        }

        root.appendChild(el)
      }

      // 使用运行时渲染
      const obj = {
        tag: 'div',
        children: [{ tag: 'span', children: '这是纯运行时渲染的内容' }],
      }
      render(obj, document.getElementById('runtime-demo'))

      // 模拟运行时+编译时框架
      function compiler(template) {
        // 这里简化了编译过程，实际框架中会更复杂
        return {
          tag: 'div',
          children: [{ tag: 'span', children: '这是经过编译后运行时渲染的内容' }],
        }
      }

      const template = document.getElementById('template').innerHTML
      const compiled = compiler(template)
      render(compiled, document.getElementById('mixed-demo'))

      // 模拟编译时框架生成的代码
      function createCompiledDemo() {
        const div = document.createElement('div')
        const span = document.createElement('span')
        span.textContent = '这是纯编译时生成的内容'
        div.appendChild(span)
        document.getElementById('compile-demo').appendChild(div)
      }
      createCompiledDemo()
    </script>
  </body>
</html>
